<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¯Ø±Ø§Ø³Ø© - Ø§Ù„Ø§ÙˆØ§Ù†</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        :root {
            --primary: linear-gradient(135deg, #00ff88, #0099ff);
            --secondary: #2a2a72;
            --dark: #0a0a1a;
            --light: #f0f8ff;
            --accent: #00ff88;
            --pink: #ff00ff;
            --dark-pink: #990099;
            --card-bg: rgba(20, 25, 40, 0.95);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background: var(--dark);
            color: var(--light);
            min-height: 100vh;
            overflow-x: hidden;
        }

        /* Ø®Ù„ÙÙŠØ© Ø§Ù„Ø£Ø´ÙƒØ§Ù„ Ø§Ù„Ø³Ø¯Ø§Ø³ÙŠØ© */
        .hexagon-background {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            z-index: -1;
            overflow: hidden;
        }

        .hexagon {
            position: absolute;
            width: 100px;
            height: 57.74px;
            background: linear-gradient(135deg, var(--pink), var(--dark-pink));
            clip-path: polygon(50% 0%, 100% 25%, 100% 75%, 50% 100%, 0% 75%, 0% 25%);
            opacity: 0.3;
            transition: all 0.5s ease;
        }

        .hexagon:hover {
            background: var(--accent);
            opacity: 0.8;
            transform: scale(1.2);
            box-shadow: 0 0 20px var(--accent);
        }

        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ø­Ø§ÙˆÙŠØ§Øª */
        .container {
            max-width: 1400px;
            margin: 0 auto;
            padding: 30px;
        }

        /* ØµÙØ­Ø§Øª Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ */
        .page {
            display: none;
        }

        .page.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        /* ØµÙØ­Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© */
        .auth-container {
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }

        .auth-box {
            background: rgba(10, 15, 30, 0.9);
            backdrop-filter: blur(10px);
            border-radius: 20px;
            padding: 40px;
            width: 100%;
            max-width: 500px;
            border: 1px solid rgba(0, 255, 136, 0.3);
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.5);
        }

        .form-group {
            margin-bottom: 20px;
        }

        label {
            display: block;
            margin-bottom: 8px;
            color: var(--accent);
            font-weight: bold;
        }

        input, select, textarea {
            width: 100%;
            padding: 12px 15px;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(0, 255, 136, 0.3);
            border-radius: 10px;
            color: var(--light);
            font-size: 16px;
            transition: border 0.3s;
        }

        input:focus, select:focus, textarea:focus {
            outline: none;
            border-color: var(--accent);
            box-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
        }

        /* Ø£Ø²Ø±Ø§Ø± Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ */
        .btn {
            display: inline-flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 12px 30px;
            background: var(--primary);
            color: white;
            border: none;
            border-radius: 50px;
            font-size: 16px;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            text-decoration: none;
            margin: 5px;
        }

        .btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 5px 15px rgba(0, 255, 136, 0.4);
        }

        .btn-secondary {
            background: linear-gradient(135deg, var(--pink), var(--dark-pink));
        }

        /* Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ */
        .navbar {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 20px;
            background: rgba(10, 15, 30, 0.9);
            backdrop-filter: blur(10px);
            border-bottom: 1px solid rgba(0, 255, 136, 0.3);
        }

        .nav-links {
            display: flex;
            gap: 20px;
            flex-wrap: wrap;
        }

        .nav-link {
            color: var(--light);
            text-decoration: none;
            padding: 10px 20px;
            border-radius: 50px;
            transition: all 0.3s;
        }

        .nav-link:hover {
            background: rgba(0, 255, 136, 0.2);
            color: var(--accent);
        }

        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ù†Ø¨Ø§ØªØ§Øª */
        .plants-container {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(200px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .plant {
            background: rgba(0, 255, 136, 0.1);
            border-radius: 15px;
            padding: 20px;
            text-align: center;
            border: 1px solid rgba(0, 255, 136, 0.3);
            transition: all 0.3s;
        }

        .plant:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 20px rgba(0, 255, 136, 0.2);
        }

        .plant-level {
            font-size: 24px;
            font-weight: bold;
            color: var(--accent);
            margin: 10px 0;
        }

        .plant-progress {
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
            margin: 10px 0;
        }

        .plant-progress-bar {
            height: 100%;
            background: var(--primary);
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        /* Ù…Ø¤Ù‚Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø© */
        .study-timer {
            font-size: 48px;
            font-weight: bold;
            text-align: center;
            margin: 20px 0;
            color: var(--accent);
            text-shadow: 0 0 10px rgba(0, 255, 136, 0.5);
        }

        .timer-controls {
            display: flex;
            justify-content: center;
            gap: 20px;
            margin: 20px 0;
            flex-wrap: wrap;
        }

        /* Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù… */
        .tasks-container {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 20px;
            margin: 20px 0;
        }

        .task-item {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 15px;
            background: rgba(255, 255, 255, 0.05);
            border-radius: 10px;
            margin: 10px 0;
            border-left: 4px solid var(--accent);
        }

        .task-actions {
            display: flex;
            gap: 10px;
        }

        /* ØªØµÙ…ÙŠÙ… Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ */
        .schedule-container {
            background: var(--card-bg);
            border-radius: 25px;
            padding: 30px;
            border: 1px solid rgba(0, 255, 136, 0.3);
            box-shadow: 0 15px 35px rgba(0, 0, 0, 0.5);
            backdrop-filter: blur(10px);
            margin-bottom: 40px;
        }

        .schedule-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 30px;
            flex-wrap: wrap;
            gap: 20px;
        }

        .week-navigation {
            display: flex;
            gap: 15px;
            align-items: center;
        }

        .current-week {
            font-size: 1.3rem;
            background: linear-gradient(90deg, #00ff88, #0099ff);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
            font-weight: bold;
        }

        .total-hours {
            background: rgba(0, 255, 136, 0.1);
            padding: 15px 25px;
            border-radius: 50px;
            border: 1px solid rgba(0, 255, 136, 0.3);
            font-size: 1.2rem;
        }

        .total-hours span {
            color: var(--accent);
            font-weight: bold;
            font-size: 1.4rem;
        }

        /* Ø£ÙŠØ§Ù… Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
        .days-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
            gap: 25px;
            margin-bottom: 30px;
        }

        .day-card {
            background: rgba(30, 35, 50, 0.8);
            border-radius: 20px;
            padding: 25px;
            transition: all 0.3s ease;
            border: 2px solid rgba(255, 255, 255, 0.05);
            position: relative;
            overflow: hidden;
        }

        .day-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 10px 25px rgba(0, 255, 136, 0.2);
            border-color: rgba(0, 255, 136, 0.5);
        }

        .day-card::before {
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            width: 100%;
            height: 5px;
            background: var(--primary);
        }

        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 20px;
            padding-bottom: 15px;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
        }

        .day-name {
            font-size: 1.5rem;
            font-weight: bold;
            background: var(--primary);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .day-hours {
            background: rgba(0, 255, 136, 0.15);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9rem;
        }

        /* Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¬Ø¯ÙˆÙ„ */
        .hours-slots {
            display: flex;
            flex-direction: column;
            gap: 15px;
        }

        .hour-slot {
            background: rgba(255, 255, 255, 0.05);
            border-radius: 15px;
            padding: 15px;
            transition: all 0.3s ease;
            border: 1px solid transparent;
        }

        .hour-slot:hover {
            background: rgba(0, 255, 136, 0.1);
            border-color: rgba(0, 255, 136, 0.3);
            transform: translateX(-5px);
        }

        .hour-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 10px;
        }

        .hour-time {
            font-weight: bold;
            color: var(--accent);
        }

        .hour-duration {
            background: rgba(0, 153, 255, 0.2);
            padding: 4px 10px;
            border-radius: 15px;
            font-size: 0.9rem;
        }

        .hour-subject {
            font-size: 1.1rem;
            margin-bottom: 8px;
        }

        .hour-actions {
            display: flex;
            gap: 10px;
            margin-top: 10px;
            opacity: 0;
            transition: opacity 0.3s ease;
        }

        .hour-slot:hover .hour-actions {
            opacity: 1;
        }

        /* Ø¥Ø¶Ø§ÙØ© Ù†Ø´Ø§Ø· */
        .add-activity {
            background: rgba(0, 255, 136, 0.05);
            border: 2px dashed rgba(0, 255, 136, 0.3);
            border-radius: 15px;
            padding: 20px;
            margin-top: 20px;
            text-align: center;
            cursor: pointer;
            transition: all 0.3s;
        }

        .add-activity:hover {
            background: rgba(0, 255, 136, 0.1);
            border-color: var(--accent);
        }

        /* Ù†Ù…ÙˆØ°Ø¬ Ø§Ù„Ù†Ø´Ø§Ø· */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.9);
            z-index: 1000;
            justify-content: center;
            align-items: center;
        }

        .modal-content {
            background: var(--card-bg);
            border-radius: 25px;
            padding: 40px;
            width: 90%;
            max-width: 600px;
            border: 1px solid rgba(0, 255, 136, 0.3);
            box-shadow: 0 20px 50px rgba(0, 255, 136, 0.2);
            position: relative;
        }

        .close-modal {
            position: absolute;
            top: 20px;
            left: 20px;
            background: transparent;
            color: var(--accent);
            border: none;
            font-size: 1.5rem;
            cursor: pointer;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.3s;
        }

        .close-modal:hover {
            background: rgba(255, 0, 0, 0.2);
            color: #ff5555;
        }

        .form-row {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 20px;
        }

        /* Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª */
        .stats-container {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 25px;
            margin-top: 40px;
        }

        .stat-card {
            background: rgba(30, 35, 50, 0.8);
            border-radius: 20px;
            padding: 25px;
            text-align: center;
            border: 1px solid rgba(255, 255, 255, 0.05);
            transition: all 0.3s;
        }

        .stat-card:hover {
            transform: translateY(-5px);
            border-color: rgba(0, 255, 136, 0.3);
        }

        .stat-icon {
            font-size: 2.5rem;
            margin-bottom: 15px;
            background: var(--primary);
            -webkit-background-clip: text;
            background-clip: text;
            color: transparent;
        }

        .stat-value {
            font-size: 2.2rem;
            font-weight: bold;
            color: var(--accent);
            margin-bottom: 5px;
        }

        /* ØªØ­Ø°ÙŠØ± Ø§Ù„Ø­Ø¸Ø± */
        .blocked-warning {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0, 0, 0, 0.95);
            display: flex;
            justify-content: center;
            align-items: center;
            z-index: 1000;
            display: none;
        }

        .warning-content {
            text-align: center;
            padding: 40px;
            background: linear-gradient(135deg, #ff0000, #990000);
            border-radius: 20px;
            max-width: 500px;
        }

        /* Ø£Ø´Ø±Ø·Ø© Ø§Ù„ØªÙ‚Ø¯Ù… */
        .progress-bar {
            height: 10px;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 5px;
            overflow: hidden;
            margin-top: 10px;
        }

        .progress-fill {
            height: 100%;
            background: var(--primary);
            border-radius: 5px;
            transition: width 0.5s ease;
        }

        /* Ø§Ø³ØªØ¬Ø§Ø¨Ø© Ù„Ù„Ø¬ÙˆØ§Ù„ */
        @media (max-width: 1200px) {
            .days-container {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        @media (max-width: 768px) {
            .days-container {
                grid-template-columns: 1fr;
            }
            
            .form-row {
                grid-template-columns: 1fr;
            }
            
            .study-timer {
                font-size: 36px;
            }
            
            .timer-controls {
                flex-direction: column;
                align-items: center;
            }
            
            .nav-links {
                flex-direction: column;
                align-items: center;
            }
            
            .navbar {
                flex-direction: column;
                gap: 20px;
            }
            
            .container {
                padding: 15px;
            }
        }
    </style>
</head>
<body>
    <!-- Ø®Ù„ÙÙŠØ© Ø§Ù„Ø£Ø´ÙƒØ§Ù„ Ø§Ù„Ø³Ø¯Ø§Ø³ÙŠØ© -->
    <div class="hexagon-background" id="hexagonBackground"></div>

    <!-- ØµÙØ­Ø© Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© -->
    <div id="authPage" class="page active">
        <div class="auth-container">
            <div class="auth-box">
                <h1 style="text-align: center; margin-bottom: 30px; background: var(--primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                    Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¯Ø±Ø§Ø³Ø© - Ø§Ù„Ø§ÙˆØ§Ù†
                </h1>
                
                <div id="registerSection">
                    <h2 style="text-align: center; margin-bottom: 20px;">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨ Ø¬Ø¯ÙŠØ¯</h2>
                    <form id="registerForm">
                        <div class="form-group">
                            <label for="firstName">Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø£ÙˆÙ„:</label>
                            <input type="text" id="firstName" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="lastName">Ø§Ù„Ø§Ø³Ù… Ø§Ù„Ø«Ø§Ù†ÙŠ:</label>
                            <input type="text" id="lastName" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="email">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</label>
                            <input type="email" id="email" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="password">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:</label>
                            <input type="password" id="password" required minlength="6">
                        </div>
                        
                        <div class="form-group">
                            <label for="confirmPassword">ØªØ£ÙƒÙŠØ¯ ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:</label>
                            <input type="password" id="confirmPassword" required minlength="6">
                        </div>
                        
                        <div style="text-align: center; margin: 30px 0;">
                            <button type="submit" class="btn">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨</button>
                        </div>
                    </form>
                    
                    <div style="text-align: center; margin: 20px 0;">
                        <p>Ø£Ùˆ Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù…:</p>
                        <button class="btn btn-secondary" onclick="loginWithGoogle()">
                            <i class="fab fa-google"></i> Ø¬ÙˆØ¬Ù„
                        </button>
                        <button class="btn btn-secondary" onclick="loginWithDiscord()">
                            <i class="fab fa-discord"></i> Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯
                        </button>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <p>Ù‡Ù„ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ Ø¨Ø§Ù„ÙØ¹Ù„ØŸ <a href="#" onclick="showLogin()" style="color: var(--accent);">Ø³Ø¬Ù„ Ø§Ù„Ø¯Ø®ÙˆÙ„</a></p>
                    </div>
                </div>
                
                <div id="loginSection" style="display: none;">
                    <h2 style="text-align: center; margin-bottom: 20px;">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</h2>
                    <form id="loginForm">
                        <div class="form-group">
                            <label for="loginEmail">Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ:</label>
                            <input type="email" id="loginEmail" required>
                        </div>
                        
                        <div class="form-group">
                            <label for="loginPassword">ÙƒÙ„Ù…Ø© Ø§Ù„Ù…Ø±ÙˆØ±:</label>
                            <input type="password" id="loginPassword" required>
                        </div>
                        
                        <div style="text-align: center; margin: 30px 0;">
                            <button type="submit" class="btn">ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„</button>
                        </div>
                    </form>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <p>Ù„ÙŠØ³ Ù„Ø¯ÙŠÙƒ Ø­Ø³Ø§Ø¨ØŸ <a href="#" onclick="showRegister()" style="color: var(--accent);">Ø¥Ù†Ø´Ø§Ø¡ Ø­Ø³Ø§Ø¨</a></p>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ø§Ù„ØµÙØ­Ø© Ø§Ù„Ø±Ø¦ÙŠØ³ÙŠØ© -->
    <div id="mainPage" class="page">
        <!-- Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ†Ù‚Ù„ -->
        <nav class="navbar">
            <div style="font-size: 24px; font-weight: bold; background: var(--primary); -webkit-background-clip: text; -webkit-text-fill-color: transparent;">
                Ø§Ù„Ø§ÙˆØ§Ù† Ù„Ù„Ø¯Ø±Ø§Ø³Ø©
            </div>
            <div class="nav-links">
                <a href="#plants" class="nav-link" onclick="showSection('plants')">
                    <i class="fas fa-seedling"></i> Ù†Ø¨Ø§ØªØ§ØªÙŠ
                </a>
                <a href="#timer" class="nav-link" onclick="showSection('timer')">
                    <i class="fas fa-clock"></i> Ù…Ø¤Ù‚Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø©
                </a>
                <a href="#tasks" class="nav-link" onclick="showSection('tasks')">
                    <i class="fas fa-tasks"></i> Ø§Ù„Ù…Ù‡Ø§Ù…
                </a>
                <a href="#schedule" class="nav-link" onclick="showSection('schedule')">
                    <i class="fas fa-calendar-alt"></i> Ø¬Ø¯ÙˆÙ„ÙŠ
                </a>
                <button class="btn" onclick="logout()" style="padding: 8px 20px;">
                    <i class="fas fa-sign-out-alt"></i> Ø®Ø±ÙˆØ¬
                </button>
            </div>
        </nav>

        <div class="container">
            <!-- Ù‚Ø³Ù… Ø§Ù„Ù†Ø¨Ø§ØªØ§Øª -->
            <div id="plants" class="page-section active">
                <div class="schedule-container">
                    <h2><i class="fas fa-seedling"></i> Ù†Ø¨Ø§ØªØ§Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø©</h2>
                    <p>ÙƒÙ„Ù…Ø§ Ø¯Ø±Ø³Øª Ø£ÙƒØ«Ø±ØŒ ÙƒÙ„Ù…Ø§ ÙƒØ¨Ø±Øª Ù†Ø¨Ø§ØªØ§ØªÙƒ! Ø§Ø³ØªØ®Ø¯Ù… Ø§Ù„ØªÙˆÙƒÙ†Ø§Øª Ù„ÙØªØ­ Ù†Ø¨Ø§ØªØ§Øª Ø¬Ø¯ÙŠØ¯Ø©.</p>
                    
                    <div style="text-align: center; margin: 20px 0;">
                        <div style="font-size: 24px; color: var(--accent);">
                            Ø§Ù„ØªÙˆÙƒÙ†Ø§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©: <span id="tokenCount">5</span> ğŸª™
                        </div>
                        <button class="btn" onclick="buyNewPlant()">Ø´Ø±Ø§Ø¡ Ù†Ø¨Ø§Øª Ø¬Ø¯ÙŠØ¯ (3 ØªÙˆÙƒÙ†Ø§Øª)</button>
                    </div>
                    
                    <div class="plants-container" id="plantsContainer">
                        <!-- Ø§Ù„Ù†Ø¨Ø§ØªØ§Øª Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ Ø¹Ø¨Ø± JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Ù…Ø¤Ù‚Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø© -->
            <div id="timer" class="page-section">
                <div class="schedule-container">
                    <h2><i class="fas fa-clock"></i> Ù…Ø¤Ù‚Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø©</h2>
                    <p>Ù„Ø¯ÙŠÙƒ 5 Ø³Ø§Ø¹Ø§Øª Ø¯Ø±Ø§Ø³Ø© ÙŠÙˆÙ…ÙŠØ§Ù‹. Ø§Ø­Ø±Øµ Ø¹Ù„Ù‰ Ø§Ù„Ø§Ø³ØªÙØ§Ø¯Ø© Ù…Ù†Ù‡Ø§!</p>
                    
                    <div class="study-timer" id="studyTimer">05:00:00</div>
                    
                    <div class="timer-controls">
                        <button class="btn" id="startTimer" onclick="startTimer()">
                            <i class="fas fa-play"></i> Ø¨Ø¯Ø¡ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©
                        </button>
                        <button class="btn btn-secondary" id="pauseTimer" onclick="pauseTimer()" disabled>
                            <i class="fas fa-pause"></i> ØªÙˆÙ‚Ù Ù…Ø¤Ù‚Øª
                        </button>
                        <button class="btn" id="resetTimer" onclick="resetTimer()">
                            <i class="fas fa-redo"></i> Ø¥Ø¹Ø§Ø¯Ø© ØªØ¹ÙŠÙŠÙ†
                        </button>
                    </div>
                    
                    <div style="text-align: center; margin-top: 20px;">
                        <p>Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ù…ØªØ¨Ù‚ÙŠ Ø§Ù„ÙŠÙˆÙ…: <span id="remainingTime" style="color: var(--accent);">05:00:00</span></p>
                        <p id="blockMessage" style="color: #ff5555; display: none;">
                            <i class="fas fa-exclamation-triangle"></i> Ù„Ù‚Ø¯ ØªØ¬Ø§ÙˆØ²Øª ÙˆÙ‚Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø©! Ø³ÙŠØªÙ… Ø­Ø¸Ø± Ø§Ù„Ù…ÙˆÙ‚Ø¹ Ù„Ù…Ø¯Ø© 3 Ø³Ø§Ø¹Ø§Øª.
                        </p>
                    </div>
                </div>
            </div>

            <!-- Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù… -->
            <div id="tasks" class="page-section">
                <div class="schedule-container">
                    <h2><i class="fas fa-tasks"></i> Ù‚Ø§Ø¦Ù…Ø© Ø§Ù„Ù…Ù‡Ø§Ù…</h2>
                    
                    <div class="form-group">
                        <input type="text" id="newTask" placeholder="Ø£Ø¶Ù Ù…Ù‡Ù…Ø© Ø¬Ø¯ÙŠØ¯Ø©...">
                        <button class="btn" style="margin-top: 10px; width: 100%;" onclick="addTask()">
                            <i class="fas fa-plus"></i> Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ù‡Ù…Ø©
                        </button>
                    </div>
                    
                    <div class="tasks-container" id="tasksList">
                        <!-- Ø§Ù„Ù…Ù‡Ø§Ù… Ø³ØªØ¸Ù‡Ø± Ù‡Ù†Ø§ Ø¹Ø¨Ø± JavaScript -->
                    </div>
                </div>
            </div>

            <!-- Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³Ø© -->
            <div id="schedule" class="page-section">
                <div class="schedule-container">
                    <!-- Ø±Ø£Ø³ Ø§Ù„Ø¬Ø¯ÙˆÙ„ -->
                    <div class="schedule-header">
                        <div class="week-navigation">
                            <button class="btn" id="prevWeek"><i class="fas fa-chevron-right"></i></button>
                            <div class="current-week" id="currentWeek">Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ 1: 1 ÙŠÙ†Ø§ÙŠØ± - 7 ÙŠÙ†Ø§ÙŠØ±</div>
                            <button class="btn" id="nextWeek"><i class="fas fa-chevron-left"></i></button>
                        </div>
                        
                        <div class="total-hours">
                            <i class="fas fa-clock"></i> Ø¥Ø¬Ù…Ø§Ù„ÙŠ Ø³Ø§Ø¹Ø§Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ù‡Ø°Ø§ Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹: <span id="totalHours">0</span> Ø³Ø§Ø¹Ø©
                        </div>
                    </div>

                    <!-- Ø£ÙŠØ§Ù… Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ -->
                    <div class="days-container" id="daysContainer">
                        <!-- Ø³ÙŠØªÙ… Ù…Ù„Ø¡ Ø§Ù„Ø£ÙŠØ§Ù… Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
                    </div>

                    <!-- Ø£Ø²Ø±Ø§Ø± Ø§Ù„Ø­ÙØ¸ ÙˆØ§Ù„Ø¥Ø±Ø³Ø§Ù„ -->
                    <div class="action-buttons" style="display: flex; justify-content: center; gap: 20px; margin-top: 40px; flex-wrap: wrap;">
                        <button class="btn" onclick="saveSchedule()">
                            <i class="fas fa-save"></i> Ø­ÙØ¸ Ø§Ù„Ø¬Ø¯ÙˆÙ„
                        </button>
                        <button class="btn btn-secondary" onclick="sendEmailReminder()">
                            <i class="fas fa-paper-plane"></i> Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¥Ù„Ù‰ Ø¨Ø±ÙŠØ¯ÙŠ
                        </button>
                        <button class="btn" onclick="printSchedule()">
                            <i class="fas fa-print"></i> Ø·Ø¨Ø§Ø¹Ø© Ø§Ù„Ø¬Ø¯ÙˆÙ„
                        </button>
                        <button class="btn" onclick="clearSchedule()">
                            <i class="fas fa-trash-alt"></i> Ù…Ø³Ø­ Ø§Ù„Ø¬Ø¯ÙˆÙ„
                        </button>
                    </div>
                </div>

                <!-- Ø¥Ø­ØµØ§Ø¦ÙŠØ§Øª -->
                <div class="stats-container">
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-book-open"></i>
                        </div>
                        <div class="stat-value" id="totalSubjects">0</div>
                        <div class="stat-label">Ù…Ø§Ø¯Ø© Ø¯Ø±Ø§Ø³ÙŠØ©</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="subjectProgress" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <div class="stat-value" id="focusHours">0</div>
                        <div class="stat-label">Ø³Ø§Ø¹Ø© ØªØ±ÙƒÙŠØ² Ø¹Ø§Ù„ÙŠ</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="focusProgress" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-fire-alt"></i>
                        </div>
                        <div class="stat-value" id="streakDays">0</div>
                        <div class="stat-label">ÙŠÙˆÙ… Ù…ØªØªØ§Ù„ÙŠ</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="streakProgress" style="width: 0%"></div>
                        </div>
                    </div>
                    
                    <div class="stat-card">
                        <div class="stat-icon">
                            <i class="fas fa-trophy"></i>
                        </div>
                        <div class="stat-value" id="completionRate">0%</div>
                        <div class="stat-label">Ù†Ø³Ø¨Ø© Ø§Ù„Ø¥Ù†Ø¬Ø§Ø²</div>
                        <div class="progress-bar">
                            <div class="progress-fill" id="completionProgress" style="width: 0%"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <!-- Ù†Ù…ÙˆØ°Ø¬ Ø¥Ø¶Ø§ÙØ©/ØªØ¹Ø¯ÙŠÙ„ Ø§Ù„Ù†Ø´Ø§Ø· -->
    <div class="modal" id="activityModal">
        <div class="modal-content">
            <button class="close-modal" onclick="closeModal()">&times;</button>
            <h2 style="text-align: center; margin-bottom: 30px; background: var(--primary); -webkit-background-clip: text; background-clip: text; color: transparent;">
                <span id="modalTitle">Ø¥Ø¶Ø§ÙØ© Ù†Ø´Ø§Ø· Ø¯Ø±Ø§Ø³ÙŠ</span>
            </h2>
            
            <form id="activityForm">
                <input type="hidden" id="activityId">
                <input type="hidden" id="activityDay">
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="subject"><i class="fas fa-book"></i> Ø§Ù„Ù…Ø§Ø¯Ø© Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ©</label>
                        <select id="subject" required>
                            <option value="">Ø§Ø®ØªØ± Ø§Ù„Ù…Ø§Ø¯Ø©</option>
                            <option value="Ø±ÙŠØ§Ø¶ÙŠØ§Øª">Ø±ÙŠØ§Ø¶ÙŠØ§Øª</option>
                            <option value="ÙÙŠØ²ÙŠØ§Ø¡">ÙÙŠØ²ÙŠØ§Ø¡</option>
                            <option value="ÙƒÙŠÙ…ÙŠØ§Ø¡">ÙƒÙŠÙ…ÙŠØ§Ø¡</option>
                            <option value="Ø£Ø­ÙŠØ§Ø¡">Ø£Ø­ÙŠØ§Ø¡</option>
                            <option value="Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©">Ù„ØºØ© Ø¹Ø±Ø¨ÙŠØ©</option>
                            <option value="Ù„ØºØ© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©">Ù„ØºØ© Ø¥Ù†Ø¬Ù„ÙŠØ²ÙŠØ©</option>
                            <option value="ØªØ§Ø±ÙŠØ®">ØªØ§Ø±ÙŠØ®</option>
                            <option value="Ø¬ØºØ±Ø§ÙÙŠØ§">Ø¬ØºØ±Ø§ÙÙŠØ§</option>
                            <option value="ÙÙ„Ø³ÙØ©">ÙÙ„Ø³ÙØ©</option>
                            <option value="Ø¹Ù„ÙˆÙ… Ø­Ø§Ø³ÙˆØ¨">Ø¹Ù„ÙˆÙ… Ø­Ø§Ø³ÙˆØ¨</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="topic"><i class="fas fa-pen"></i> Ø§Ù„Ù…ÙˆØ¶ÙˆØ¹/Ø§Ù„Ø¯Ø±Ø³</label>
                        <input type="text" id="topic" placeholder="Ù…Ø«Ø§Ù„: Ø§Ù„ØªÙØ§Ø¶Ù„ ÙˆØ§Ù„ØªÙƒØ§Ù…Ù„" required>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="startTime"><i class="fas fa-clock"></i> ÙˆÙ‚Øª Ø§Ù„Ø¨Ø¯Ø¡</label>
                        <select id="startTime" required>
                            <!-- Ø³ÙŠØªÙ… ØªØ¹Ø¨Ø¦Ø© Ø§Ù„Ø£ÙˆÙ‚Ø§Øª Ø¨ÙˆØ§Ø³Ø·Ø© JavaScript -->
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="duration"><i class="fas fa-hourglass-half"></i> Ø§Ù„Ù…Ø¯Ø© (Ø³Ø§Ø¹Ø§Øª)</label>
                        <select id="duration" required>
                            <option value="0.5">Ù†ØµÙ Ø³Ø§Ø¹Ø©</option>
                            <option value="1">1 Ø³Ø§Ø¹Ø©</option>
                            <option value="1.5">Ø³Ø§Ø¹Ø© ÙˆÙ†ØµÙ</option>
                            <option value="2">2 Ø³Ø§Ø¹Ø§Øª</option>
                            <option value="2.5">Ø³Ø§Ø¹ØªÙŠÙ† ÙˆÙ†ØµÙ</option>
                            <option value="3">3 Ø³Ø§Ø¹Ø§Øª</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="priority"><i class="fas fa-flag"></i> Ø§Ù„Ø£ÙˆÙ„ÙˆÙŠØ©</label>
                        <select id="priority" required>
                            <option value="low">Ù…Ù†Ø®ÙØ¶Ø©</option>
                            <option value="medium" selected>Ù…ØªÙˆØ³Ø·Ø©</option>
                            <option value="high">Ø¹Ø§Ù„ÙŠØ©</option>
                        </select>
                    </div>
                    
                    <div class="form-group">
                        <label for="type"><i class="fas fa-tasks"></i> Ù†ÙˆØ¹ Ø§Ù„Ù†Ø´Ø§Ø·</label>
                        <select id="type" required>
                            <option value="Ù…Ø°Ø§ÙƒØ±Ø©">Ù…Ø°Ø§ÙƒØ±Ø©</option>
                            <option value="Ù…Ø±Ø§Ø¬Ø¹Ø©">Ù…Ø±Ø§Ø¬Ø¹Ø©</option>
                            <option value="ØªÙ…Ø±ÙŠÙ†">ØªÙ…Ø±ÙŠÙ†</option>
                            <option value="Ø§Ø®ØªØ¨Ø§Ø±">Ø§Ø®ØªØ¨Ø§Ø±</option>
                            <option value="Ø¨Ø­Ø«">Ø¨Ø­Ø«</option>
                        </select>
                    </div>
                </div>
                
                <div class="form-group">
                    <label for="notes"><i class="fas fa-sticky-note"></i> Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ø¥Ø¶Ø§ÙÙŠØ©</label>
                    <textarea id="notes" rows="3" placeholder="Ø§ÙƒØªØ¨ Ø£ÙŠ Ù…Ù„Ø§Ø­Ø¸Ø§Øª Ù‡Ù†Ø§..."></textarea>
                </div>
                
                <div class="form-group" style="text-align: center; margin-top: 30px;">
                    <button type="submit" class="btn" style="padding: 15px 50px;">
                        <i class="fas fa-check"></i> Ø­ÙØ¸ Ø§Ù„Ù†Ø´Ø§Ø·
                    </button>
                </div>
            </form>
        </div>
    </div>

    <!-- ØªØ­Ø°ÙŠØ± Ø§Ù„Ø­Ø¸Ø± -->
    <div class="blocked-warning" id="blockedWarning">
        <div class="warning-content">
            <h1><i class="fas fa-ban"></i> ØªÙ… Ø­Ø¸Ø± Ø­Ø³Ø§Ø¨Ùƒ!</h1>
            <p style="font-size: 24px; margin: 20px 0;">â° 03:00:00</p>
            <p>Ù„Ù‚Ø¯ ØªØ¬Ø§ÙˆØ²Øª ÙˆÙ‚Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ù…Ø³Ù…ÙˆØ­ Ø¨Ù‡ Ø§Ù„ÙŠÙˆÙ… (5 Ø³Ø§Ø¹Ø§Øª).</p>
            <p>Ø³ÙŠØªÙ… ÙØªØ­ Ø§Ù„Ù…ÙˆÙ‚Ø¹ ØªÙ„Ù‚Ø§Ø¦ÙŠØ§Ù‹ Ø¨Ø¹Ø¯ 3 Ø³Ø§Ø¹Ø§Øª.</p>
            <p style="margin-top: 20px; font-size: 14px; opacity: 0.8;">
                <i class="fas fa-lightbulb"></i> Ù†Ù†ØµØ­ Ø¨Ø£Ø®Ø° Ù‚Ø³Ø· Ù…Ù† Ø§Ù„Ø±Ø§Ø­Ø© ÙˆØ§Ù„Ø¹ÙˆØ¯Ø© Ù„Ø§Ø­Ù‚Ø§Ù‹
            </p>
        </div>
    </div>

    <script>
        // ØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø£Ø´ÙƒØ§Ù„ Ø§Ù„Ø³Ø¯Ø§Ø³ÙŠØ©
        function generateHexagons() {
            const container = document.getElementById('hexagonBackground');
            const hexCount = 50;
            
            for (let i = 0; i < hexCount; i++) {
                const hexagon = document.createElement('div');
                hexagon.className = 'hexagon';
                hexagon.style.left = `${Math.random() * 100}%`;
                hexagon.style.top = `${Math.random() * 100}%`;
                hexagon.style.transform = `rotate(${Math.random() * 360}deg)`;
                container.appendChild(hexagon);
            }
        }

        // ==================== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„Ø­Ø§Ù„Ø© Ø§Ù„Ø¹Ø§Ù…Ø© ====================
        let currentUser = null;
        let plants = [];
        let tasks = [];
        let studyTimeLeft = 5 * 60 * 60; // 5 Ø³Ø§Ø¹Ø§Øª Ø¨Ø§Ù„Ø«ÙˆØ§Ù†ÙŠ
        let studyTimerInterval = null;
        let isTimerRunning = false;

        // Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ
        let scheduleData = {
            currentWeek: 1,
            currentYear: new Date().getFullYear(),
            days: {}
        };

        // Ø§Ù„Ø£ÙŠØ§Ù… Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠØ© (Ø§Ù„Ø³Ø¨Øª Ø¥Ù„Ù‰ Ø§Ù„Ø®Ù…ÙŠØ³)
        const studyDays = [
            { id: 'saturday', name: 'Ø§Ù„Ø³Ø¨Øª', hours: 0, activities: [] },
            { id: 'sunday', name: 'Ø§Ù„Ø£Ø­Ø¯', hours: 0, activities: [] },
            { id: 'monday', name: 'Ø§Ù„Ø§Ø«Ù†ÙŠÙ†', hours: 0, activities: [] },
            { id: 'tuesday', name: 'Ø§Ù„Ø«Ù„Ø§Ø«Ø§Ø¡', hours: 0, activities: [] },
            { id: 'wednesday', name: 'Ø§Ù„Ø£Ø±Ø¨Ø¹Ø§Ø¡', hours: 0, activities: [] },
            { id: 'thursday', name: 'Ø§Ù„Ø®Ù…ÙŠØ³', hours: 0, activities: [] }
        ];

        // Ø£ÙˆÙ‚Ø§Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø© Ø§Ù„Ù…ØªØ§Ø­Ø© (Ù…Ù† 6 ØµØ¨Ø§Ø­Ø§Ù‹ Ø¥Ù„Ù‰ 10 Ù…Ø³Ø§Ø¡Ù‹)
        const studyTimes = [];
        for (let hour = 6; hour <= 22; hour++) {
            for (let minute of ['00', '30']) {
                const time = `${hour.toString().padStart(2, '0')}:${minute}`;
                studyTimes.push(time);
            }
        }

        // ==================== ØªØ­Ù…ÙŠÙ„ ÙˆØ­ÙØ¸ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ====================
        function loadData() {
            const savedUser = localStorage.getItem('studyUser');
            const savedPlants = localStorage.getItem('studyPlants');
            const savedTasks = localStorage.getItem('studyTasks');
            const savedTime = localStorage.getItem('studyTimeLeft');
            const savedSchedule = localStorage.getItem('studySchedule');

            if (savedUser) currentUser = JSON.parse(savedUser);
            if (savedPlants) plants = JSON.parse(savedPlants);
            if (savedTasks) tasks = JSON.parse(savedTasks);
            if (savedTime) studyTimeLeft = parseInt(savedTime);
            if (savedSchedule) scheduleData = JSON.parse(savedSchedule);
        }

        function saveData() {
            if (currentUser) {
                localStorage.setItem('studyUser', JSON.stringify(currentUser));
            }
            localStorage.setItem('studyPlants', JSON.stringify(plants));
            localStorage.setItem('studyTasks', JSON.stringify(tasks));
            localStorage.setItem('studyTimeLeft', studyTimeLeft.toString());
            localStorage.setItem('studySchedule', JSON.stringify(scheduleData));
        }

        // ==================== Ù†Ø¸Ø§Ù… Ø§Ù„Ù…ØµØ§Ø¯Ù‚Ø© ====================
        document.getElementById('loginForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const email = document.getElementById('loginEmail').value;
            const password = document.getElementById('loginPassword').value;

            currentUser = {
                email: email,
                firstName: "Ù…Ø³ØªØ®Ø¯Ù…",
                lastName: "Ù…ÙˆÙ‚Ø¹ Ø§Ù„Ø¯Ø±Ø§Ø³Ø©"
            };

            localStorage.setItem('studyUser', JSON.stringify(currentUser));
            showPage('mainPage');
            loadData();
            initializeDefaultData();
            renderPlants();
            renderTasks();
            renderSchedule();
            updateTimerDisplay();
        });

        document.getElementById('registerForm').addEventListener('submit', function(e) {
            e.preventDefault();
            const firstName = document.getElementById('firstName').value;
            const lastName = document.getElementById('lastName').value;
            const email = document.getElementById('email').value;
            const password = document.getElementById('password').value;
            const confirmPassword = document.getElementById('confirmPassword').value;

            if (password !== confirmPassword) {
                alert('ÙƒÙ„Ù…Ø§Øª Ø§Ù„Ù…Ø±ÙˆØ± ØºÙŠØ± Ù…ØªØ·Ø§Ø¨Ù‚Ø©!');
                return;
            }

            currentUser = {
                firstName: firstName,
                lastName: lastName,
                email: email
            };

            plants = [
                { id: 1, name: 'Ù†Ø¨ØªØ© Ø§Ù„Ø¨Ø¯Ø§ÙŠØ©', level: 1, progress: 0, maxProgress: 100 }
            ];

            tasks = [
                { text: 'Ù…Ø±Ø§Ø¬Ø¹Ø© Ø¯Ø±Ø³ Ø§Ù„Ø±ÙŠØ§Ø¶ÙŠØ§Øª', date: new Date().toLocaleDateString('ar-SA'), completed: false }
            ];

            localStorage.setItem('studyUser', JSON.stringify(currentUser));
            localStorage.setItem('studyPlants', JSON.stringify(plants));
            localStorage.setItem('studyTasks', JSON.stringify(tasks));
            localStorage.setItem('tokens', '5');

            alert('ØªÙ… Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø­Ø³Ø§Ø¨ Ø¨Ù†Ø¬Ø§Ø­! ØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø±Ù…Ø² Ø§Ù„ØªØ­Ù‚Ù‚ Ø¥Ù„Ù‰ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ.');
            showLogin();
        });

        function loginWithGoogle() {
            alert('Ø³ÙŠØªÙ… ØªÙˆØ¬ÙŠÙ‡Ùƒ Ø¥Ù„Ù‰ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø¬ÙˆØ¬Ù„');
        }

        function loginWithDiscord() {
            alert('Ø³ÙŠØªÙ… ØªÙˆØ¬ÙŠÙ‡Ùƒ Ø¥Ù„Ù‰ ØµÙØ­Ø© ØªØ³Ø¬ÙŠÙ„ Ø§Ù„Ø¯Ø®ÙˆÙ„ Ø¨Ø¯ÙŠØ³ÙƒÙˆØ±Ø¯');
        }

        function logout() {
            currentUser = null;
            localStorage.removeItem('studyUser');
            showPage('authPage');
            showRegister();
        }

        // ==================== Ø¥Ø¯Ø§Ø±Ø© Ø§Ù„ØµÙØ­Ø§Øª ====================
        function showPage(pageId) {
            document.querySelectorAll('.page').forEach(page => {
                page.classList.remove('active');
            });
            document.getElementById(pageId).classList.add('active');
        }

        function showSection(sectionId) {
            document.querySelectorAll('.page-section').forEach(section => {
                section.classList.remove('active');
            });
            document.getElementById(sectionId).classList.add('active');
        }

        function showRegister() {
            document.getElementById('registerSection').style.display = 'block';
            document.getElementById('loginSection').style.display = 'none';
        }

        function showLogin() {
            document.getElementById('registerSection').style.display = 'none';
            document.getElementById('loginSection').style.display = 'block';
        }

        // ==================== Ù†Ø¸Ø§Ù… Ø§Ù„Ù†Ø¨Ø§ØªØ§Øª ====================
        function renderPlants() {
            const container = document.getElementById('plantsContainer');
            container.innerHTML = '';

            plants.forEach(plant => {
                const plantElement = document.createElement('div');
                plantElement.className = 'plant';
                plantElement.innerHTML = `
                    <h3>${plant.name}</h3>
                    <div class="plant-level">Ø§Ù„Ù…Ø³ØªÙˆÙ‰ ${plant.level}</div>
                    <div class="plant-progress">
                        <div class="plant-progress-bar" style="width: ${plant.progress}%"></div>
                    </div>
                    <p>Ø§Ù„ØªÙ‚Ø¯Ù…: ${plant.progress}%</p>
                    <button class="btn" onclick="studyPlant(${plant.id})" style="padding: 8px 15px; font-size: 14px;">
                        <i class="fas fa-book"></i> Ø¯Ø±Ø³
                    </button>
                `;
                container.appendChild(plantElement);
            });

            const tokens = localStorage.getItem('tokens') || 5;
            document.getElementById('tokenCount').textContent = tokens;
        }

        function studyPlant(plantId) {
            const plant = plants.find(p => p.id === plantId);
            if (plant) {
                plant.progress += 10;
                if (plant.progress >= 100) {
                    plant.level += 1;
                    plant.progress = 0;
                    let tokens = parseInt(localStorage.getItem('tokens') || 5);
                    tokens += 1;
                    localStorage.setItem('tokens', tokens.toString());
                    document.getElementById('tokenCount').textContent = tokens;
                    alert(`Ù…Ø¨Ø±ÙˆÙƒ! ${plant.name} ÙˆØµÙ„ Ù„Ù„Ù…Ø³ØªÙˆÙ‰ ${plant.level}! Ø­ØµÙ„Øª Ø¹Ù„Ù‰ ØªÙˆÙƒÙ† Ø¬Ø¯ÙŠØ¯.`);
                }
                saveData();
                renderPlants();
            }
        }

        function buyNewPlant() {
            let tokens = parseInt(localStorage.getItem('tokens') || 5);
            if (tokens >= 3) {
                tokens -= 3;
                localStorage.setItem('tokens', tokens.toString());

                const newPlant = {
                    id: plants.length + 1,
                    name: `Ù†Ø¨ØªØ© Ø¬Ø¯ÙŠØ¯Ø© ${plants.length + 1}`,
                    level: 1,
                    progress: 0,
                    maxProgress: 100
                };

                plants.push(newPlant);
                saveData();
                renderPlants();
                alert('ØªÙ… Ø´Ø±Ø§Ø¡ Ù†Ø¨ØªØ© Ø¬Ø¯ÙŠØ¯Ø© Ø¨Ù†Ø¬Ø§Ø­!');
            } else {
                alert('Ù„Ø§ ØªÙ…Ù„Ùƒ ØªÙˆÙƒÙ†Ø§Øª ÙƒØ§ÙÙŠØ©! ØªØ­ØªØ§Ø¬ Ø¥Ù„Ù‰ 3 ØªÙˆÙƒÙ†Ø§Øª.');
            }
        }

        // ==================== Ù…Ø¤Ù‚Øª Ø§Ù„Ø¯Ø±Ø§Ø³Ø© ====================
        function startTimer() {
            if (studyTimeLeft <= 0) {
                document.getElementById('blockMessage').style.display = 'block';
                return;
            }

            if (!isTimerRunning) {
                isTimerRunning = true;
                document.getElementById('startTimer').disabled = true;
                document.getElementById('pauseTimer').disabled = false;

                studyTimerInterval = setInterval(() => {
                    if (studyTimeLeft > 0) {
                        studyTimeLeft--;
                        updateTimerDisplay();
                        saveData();

                        plants.forEach(plant => {
                            if (plant.progress < 100) {
                                plant.progress += 0.1;
                                if (plant.progress > 100) plant.progress = 100;
                            }
                        });
                        renderPlants();
                    } else {
                        pauseTimer();
                        document.getElementById('blockMessage').style.display = 'block';
                        setTimeout(() => {
                            document.getElementById('blockedWarning').style.display = 'flex';
                            setTimeout(() => {
                                document.getElementById('blockedWarning').style.display = 'none';
                                resetTimer();
                            }, 3 * 60 * 60 * 1000);
                        }, 5000);
                    }
                }, 1000);
            }
        }

        function pauseTimer() {
            isTimerRunning = false;
            clearInterval(studyTimerInterval);
            document.getElementById('startTimer').disabled = false;
            document.getElementById('pauseTimer').disabled = true;
        }

        function resetTimer() {
            pauseTimer();
            studyTimeLeft = 5 * 60 * 60;
            updateTimerDisplay();
            document.getElementById('blockMessage').style.display = 'none';
            saveData();
        }

        function updateTimerDisplay() {
            const hours = Math.floor(studyTimeLeft / 3600);
            const minutes = Math.floor((studyTimeLeft % 3600) / 60);
            const seconds = studyTimeLeft % 60;

            document.getElementById('studyTimer').textContent = 
                `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            document.getElementById('remainingTime').textContent = 
                `${hours.toString().padStart(2, '0')}:${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
        }

        // ==================== Ù†Ø¸Ø§Ù… Ø§Ù„Ù…Ù‡Ø§Ù… ====================
        function renderTasks() {
            const container = document.getElementById('tasksList');
            container.innerHTML = '';

            tasks.forEach((task, index) => {
                const taskElement = document.createElement('div');
                taskElement.className = 'task-item';
                taskElement.innerHTML = `
                    <div>
                        <h4>${task.text}</h4>
                        <small>${task.date}</small>
                    </div>
                    <div class="task-actions">
                        <button class="btn" style="padding: 5px 10px; font-size: 12px;" onclick="toggleTask(${index})">
                            ${task.completed ? '<i class="fas fa-undo"></i>' : '<i class="fas fa-check"></i>'}
                        </button>
                        <button class="btn btn-secondary" style="padding: 5px 10px; font-size: 12px;" onclick="deleteTask(${index})">
                            <i class="fas fa-trash"></i>
                        </button>
                    </div>
                `;
                if (task.completed) {
                    taskElement.style.opacity = '0.7';
                    taskElement.style.borderLeftColor = '#888';
                }
                container.appendChild(taskElement);
            });
        }

        function addTask() {
            const taskInput = document.getElementById('newTask');
            const text = taskInput.value.trim();

            if (text) {
                const newTask = {
                    text: text,
                    date: new Date().toLocaleDateString('ar-SA'),
                    completed: false
                };

                tasks.push(newTask);
                saveData();
                renderTasks();
                taskInput.value = '';
            }
        }

        function toggleTask(index) {
            tasks[index].completed = !tasks[index].completed;
            saveData();
            renderTasks();
        }

        function deleteTask(index) {
            tasks.splice(index, 1);
            saveData();
            renderTasks();
        }

        // ==================== Ù†Ø¸Ø§Ù… Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø§Ù„Ø¯Ø±Ø§Ø³ÙŠ ====================
        function initializeDefaultData() {
            if (!scheduleData.days || Object.keys(scheduleData.days).length === 0) {
                studyDays.forEach(day => {
                    scheduleData.days[day.id] = JSON.parse(JSON.stringify(day));
                });
                saveData();
            }
        }

        function renderSchedule() {
            const container = document.getElementById('daysContainer');
            container.innerHTML = '';
            
            let totalHours = 0;
            
            studyDays.forEach(day => {
                const dayData = scheduleData.days[day.id] || day;
                totalHours += dayData.hours;
                
                const dayElement = document.createElement('div');
                dayElement.className = 'day-card';
                dayElement.innerHTML = `
                    <div class="day-header">
                        <div class="day-name">${dayData.name}</div>
                        <div class="day-hours">${dayData.hours.toFixed(1)} Ø³Ø§Ø¹Ø©</div>
                    </div>
                    
                    <div class="hours-slots" id="slots-${dayData.id}">
                        ${dayData.activities.length > 0 ? 
                            dayData.activities.map(activity => renderActivity(activity, dayData.id)).join('') : 
                            '<div style="text-align: center; padding: 20px; color: #aaa;">Ù„Ø§ ØªÙˆØ¬Ø¯ Ø£Ù†Ø´Ø·Ø© Ù…Ø¨Ø±Ù…Ø¬Ø©</div>'
                        }
                    </div>
                    
                    <div class="add-activity" onclick="openAddActivity('${dayData.id}')">
                        <i class="fas fa-plus-circle"></i> Ø¥Ø¶Ø§ÙØ© Ù†Ø´Ø§Ø· Ø¯Ø±Ø§Ø³ÙŠ
                    </div>
                `;
                
                container.appendChild(dayElement);
            });
            
            document.getElementById('totalHours').textContent = totalHours.toFixed(1);
            updateWeekDisplay();
            updateStats();
        }

        function renderActivity(activity, dayId) {
            const priorityColors = {
                low: '#00ff88',
                medium: '#0099ff',
                high: '#ff00ff'
            };
            
            const priorityText = {
                low: 'Ù…Ù†Ø®ÙØ¶Ø©',
                medium: 'Ù…ØªÙˆØ³Ø·Ø©',
                high: 'Ø¹Ø§Ù„ÙŠØ©'
            };
            
            const completedClass = activity.completed ? 'style="opacity: 0.7; border-left: 4px solid #00ff88;"' : '';
            
            return `
                <div class="hour-slot" ${completedClass} id="activity-${activity.id}">
                    <div class="hour-header">
                        <div class="hour-time">${activity.startTime}</div>
                        <div class="hour-duration">${activity.duration} Ø³Ø§Ø¹Ø©</div>
                    </div>
                    <div class="hour-subject" style="color: ${priorityColors[activity.priority]}">
                        <i class="fas fa-book"></i> ${activity.subject} - ${activity.topic}
                    </div>
                    <div style="font-size: 0.9rem; color: #aaa; margin-bottom: 5px;">
                        <i class="fas fa-tasks"></i> ${activity.type} | 
                        <i class="fas fa-flag"></i> Ø£ÙˆÙ„ÙˆÙŠØ© ${priorityText[activity.priority]}
                    </div>
                    ${activity.notes ? `<div style="font-size: 0.85rem; color: #ccc;">${activity.notes}</div>` : ''}
                    
                    <div class="hour-actions">
                        <button onclick="toggleComplete(${activity.id}, '${dayId}')">
                            <i class="fas fa-${activity.completed ? 'undo' : 'check'}"></i> ${activity.completed ? 'Ø¥Ù„ØºØ§Ø¡' : 'Ø¥Ù†Ø¬Ø§Ø²'}
                        </button>
                        <button onclick="editActivity(${activity.id}, '${dayId}')">
                            <i class="fas fa-edit"></i> ØªØ¹Ø¯ÙŠÙ„
                        </button>
                        <button onclick="deleteActivity(${activity.id}, '${dayId}')" style="color: #ff5555; border-color: #ff5555;">
                            <i class="fas fa-trash"></i> Ø­Ø°Ù
                        </button>
                    </div>
                </div>
            `;
        }

        function openAddActivity(dayId) {
            document.getElementById('activityModal').style.display = 'flex';
            document.getElementById('modalTitle').textContent = 'Ø¥Ø¶Ø§ÙØ© Ù†Ø´Ø§Ø· Ø¯Ø±Ø§Ø³ÙŠ';
            document.getElementById('activityForm').reset();
            document.getElementById('activityId').value = '';
            document.getElementById('activityDay').value = dayId;
            
            const startTimeSelect = document.getElementById('startTime');
            startTimeSelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„ÙˆÙ‚Øª</option>';
            studyTimes.forEach(time => {
                const option = document.createElement('option');
                option.value = time;
                option.textContent = time;
                startTimeSelect.appendChild(option);
            });
            
            document.getElementById('duration').value = '1';
        }

        function editActivity(activityId, dayId) {
            const day = scheduleData.days[dayId];
            const activity = day.activities.find(a => a.id === activityId);
            
            if (!activity) return;
            
            document.getElementById('activityModal').style.display = 'flex';
            document.getElementById('modalTitle').textContent = 'ØªØ¹Ø¯ÙŠÙ„ Ù†Ø´Ø§Ø· Ø¯Ø±Ø§Ø³ÙŠ';
            
            document.getElementById('activityId').value = activity.id;
            document.getElementById('activityDay').value = dayId;
            document.getElementById('subject').value = activity.subject;
            document.getElementById('topic').value = activity.topic;
            
            const startTimeSelect = document.getElementById('startTime');
            startTimeSelect.innerHTML = '<option value="">Ø§Ø®ØªØ± Ø§Ù„ÙˆÙ‚Øª</option>';
            studyTimes.forEach(time => {
                const option = document.createElement('option');
                option.value = time;
                option.textContent = time;
                if (time === activity.startTime) option.selected = true;
                startTimeSelect.appendChild(option);
            });
            
            document.getElementById('duration').value = activity.duration;
            document.getElementById('priority').value = activity.priority;
            document.getElementById('type').value = activity.type;
            document.getElementById('notes').value = activity.notes || '';
        }

        document.getElementById('activityForm').addEventListener('submit', function(e) {
            e.preventDefault();
            
            const activityId = document.getElementById('activityId').value;
            const dayId = document.getElementById('activityDay').value;
            const subject = document.getElementById('subject').value;
            const topic = document.getElementById('topic').value;
            const startTime = document.getElementById('startTime').value;
            const duration = parseFloat(document.getElementById('duration').value);
            const priority = document.getElementById('priority').value;
            const type = document.getElementById('type').value;
            const notes = document.getElementById('notes').value;
            
            const day = scheduleData.days[dayId] || { id: dayId, name: '', hours: 0, activities: [] };
            
            if (activityId) {
                const activityIndex = day.activities.findIndex(a => a.id == activityId);
                if (activityIndex !== -1) {
                    day.hours -= day.activities[activityIndex].duration;
                    
                    day.activities[activityIndex] = {
                        id: parseInt(activityId),
                        subject,
                        topic,
                        startTime,
                        duration,
                        priority,
                        type,
                        notes,
                        completed: day.activities[activityIndex].completed
                    };
                    
                    day.hours += duration;
                }
            } else {
                const newActivity = {
                    id: Date.now(),
                    subject,
                    topic,
                    startTime,
                    duration,
                    priority,
                    type,
                    notes,
                    completed: false
                };
                
                day.activities.push(newActivity);
                day.hours += duration;
            }
            
            scheduleData.days[dayId] = day;
            
            saveData();
            renderSchedule();
            closeModal();
        });

        function toggleComplete(activityId, dayId) {
            const day = scheduleData.days[dayId];
            const activity = day.activities.find(a => a.id === activityId);
            
            if (activity) {
                activity.completed = !activity.completed;
                saveData();
                renderSchedule();
            }
        }

        function deleteActivity(activityId, dayId) {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ø­Ø°Ù Ù‡Ø°Ø§ Ø§Ù„Ù†Ø´Ø§Ø·ØŸ')) return;
            
            const day = scheduleData.days[dayId];
            const activityIndex = day.activities.findIndex(a => a.id === activityId);
            
            if (activityIndex !== -1) {
                day.hours -= day.activities[activityIndex].duration;
                day.activities.splice(activityIndex, 1);
                
                saveData();
                renderSchedule();
            }
        }

        function closeModal() {
            document.getElementById('activityModal').style.display = 'none';
        }

        function saveSchedule() {
            saveData();
            
            const btn = document.querySelector('.btn');
            const originalText = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-check"></i> ØªÙ… Ø§Ù„Ø­ÙØ¸!';
            btn.style.background = 'linear-gradient(135deg, #00ff88, #00cc66)';
            
            setTimeout(() => {
                btn.innerHTML = originalText;
                btn.style.background = '';
            }, 2000);
        }

        function sendEmailReminder() {
            alert('Ø³ÙŠØªÙ… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¥Ù„Ù‰ Ø¨Ø±ÙŠØ¯Ùƒ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ. ÙÙŠ Ø§Ù„ØªØ·Ø¨ÙŠÙ‚ Ø§Ù„Ø­Ù‚ÙŠÙ‚ÙŠØŒ Ø³ØªÙƒÙˆÙ† Ù‡Ø°Ù‡ Ø§Ù„Ù…ÙŠØ²Ø© Ù…ØªØµÙ„Ø© Ø¨Ø®Ø§Ø¯Ù… Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨Ø±ÙŠØ¯.');
        }

        function printSchedule() {
            window.print();
        }

        function clearSchedule() {
            if (!confirm('Ù‡Ù„ Ø£Ù†Øª Ù…ØªØ£ÙƒØ¯ Ù…Ù† Ù…Ø³Ø­ Ø§Ù„Ø¬Ø¯ÙˆÙ„ Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ØŸ Ù„Ø§ ÙŠÙ…ÙƒÙ† Ø§Ù„ØªØ±Ø§Ø¬Ø¹ Ø¹Ù† Ù‡Ø°Ø§ Ø§Ù„Ø¥Ø¬Ø±Ø§Ø¡.')) return;
            
            scheduleData.days = {};
            studyDays.forEach(day => {
                day.activities = [];
                day.hours = 0;
                scheduleData.days[day.id] = JSON.parse(JSON.stringify(day));
            });
            
            saveData();
            renderSchedule();
        }

        function updateWeekDisplay() {
            const weekText = `Ø§Ù„Ø£Ø³Ø¨ÙˆØ¹ ${scheduleData.currentWeek}: ${getWeekDates()}`;
            document.getElementById('currentWeek').textContent = weekText;
        }

        function getWeekDates() {
            const startDate = new Date();
            startDate.setDate(startDate.getDate() - startDate.getDay());
            
            const endDate = new Date(startDate);
            endDate.setDate(endDate.getDate() + 6);
            
            const formatDate = (date) => {
                return `${date.getDate()} ${getMonthName(date.getMonth())}`;
            };
            
            return `${formatDate(startDate)} - ${formatDate(endDate)}`;
        }

        function getMonthName(month) {
            const months = [
                'ÙŠÙ†Ø§ÙŠØ±', 'ÙØ¨Ø±Ø§ÙŠØ±', 'Ù…Ø§Ø±Ø³', 'Ø£Ø¨Ø±ÙŠÙ„', 'Ù…Ø§ÙŠÙˆ', 'ÙŠÙˆÙ†ÙŠÙˆ',
                'ÙŠÙˆÙ„ÙŠÙˆ', 'Ø£ØºØ³Ø·Ø³', 'Ø³Ø¨ØªÙ…Ø¨Ø±', 'Ø£ÙƒØªÙˆØ¨Ø±', 'Ù†ÙˆÙÙ…Ø¨Ø±', 'Ø¯ÙŠØ³Ù…Ø¨Ø±'
            ];
            return months[month];
        }

        function updateStats() {
            let totalSubjects = 0;
            let totalHours = 0;
            let completedHours = 0;
            let focusHours = 0;
            const subjectsSet = new Set();
            
            Object.values(scheduleData.days).forEach(day => {
                totalHours += day.hours;
                
                day.activities.forEach(activity => {
                    subjectsSet.add(activity.subject);
                    
                    if (activity.completed) {
                        completedHours += activity.duration;
                    }
                    
                    if (activity.priority === 'high') {
                        focusHours += activity.duration;
                    }
                });
            });
            
            totalSubjects = subjectsSet.size;
            
            document.getElementById('totalSubjects').textContent = totalSubjects;
            document.getElementById('focusHours').textContent = focusHours.toFixed(1);
            
            const completionRate = totalHours > 0 ? Math.round((completedHours / totalHours) * 100) : 0;
            document.getElementById('completionRate').textContent = `${completionRate}%`;
            
            const streakDays = Math.min(7, Math.floor(totalHours / 2));
            document.getElementById('streakDays').textContent = streakDays;
            
            document.getElementById('subjectProgress').style.width = `${Math.min(100, totalSubjects * 20)}%`;
            document.getElementById('focusProgress').style.width = `${Math.min(100, focusHours * 10)}%`;
            document.getElementById('streakProgress').style.width = `${Math.min(100, streakDays * 15)}%`;
            document.getElementById('completionProgress').style.width = `${completionRate}%`;
            document.getElementById('completionProgress').style.background = 
                completionRate >= 80 ? 'linear-gradient(135deg, #00ff88, #00cc66)' : 
                completionRate >= 50 ? 'linear-gradient(135deg, #0099ff, #0066cc)' : 
                'linear-gradient(135deg, #ff00ff, #990099)';
        }

        // ==================== Ø§Ù„ØªÙ‡ÙŠØ¦Ø© ====================
        document.addEventListener('DOMContentLoaded', function() {
            generateHexagons();
            loadData();
            
            const savedUser = localStorage.getItem('studyUser');
            if (savedUser) {
                currentUser = JSON.parse(savedUser);
                showPage('mainPage');
                initializeDefaultData();
                renderPlants();
                renderTasks();
                renderSchedule();
                updateTimerDisplay();
            }
            
            document.getElementById('prevWeek').addEventListener('click', function() {
                if (scheduleData.currentWeek > 1) {
                    scheduleData.currentWeek--;
                    updateWeekDisplay();
                    saveData();
                }
            });
            
            document.getElementById('nextWeek').addEventListener('click', function() {
                scheduleData.currentWeek++;
                updateWeekDisplay();
                saveData();
            });
            
            window.addEventListener('click', function(e) {
                const modal = document.getElementById('activityModal');
                if (e.target === modal) {
                    closeModal();
                }
            });
        });
    </script>
</body>
</html>
